import{u as _,a as Z,j as e}from"./index-DNyQ5bXx.js";import{u as J,r as i}from"./react-vendor-DRM3MNr6.js";import"./supabase-g_Un6fVd.js";const U=({cartItems:f,onComplete:p,onCancel:B})=>{var $;const q=J(),{currentUser:m,updateProduct:L,addStockMovement:b,getProductById:F,logout:w,addExitRequest:V}=_(),{addNotification:o}=Z(),[g,M]=i.useState(0),[a,y]=i.useState((($=f[0])==null?void 0:$.quantity)||1),[d,j]=i.useState(!1),[C,P]=i.useState(!1),[k,O]=i.useState("left"),[h,N]=i.useState(!1),[S,T]=i.useState(0),[I,E]=i.useState([]),l=f[g],v=f.length,Q=g===v-1,c=l?F(l.productId):null,u=c?c.currentStock:(l==null?void 0:l.maxStock)||0,z=()=>{if(!l)return"Non spÃ©cifiÃ©";const t=l.storageZone||"",r=l.shelf||"",n=l.position||"";return`${t}.${r}.${n}`},R=async()=>{if(!(!m||!c||a<=0||a>u)){j(!0);try{const t=c.currentStock-a;await L(c.id,{currentStock:t},!0),await b({productId:c.id,productReference:c.reference,productDesignation:c.designation,movementType:"exit",quantity:a,previousStock:c.currentStock,newStock:t,userId:m.id,userName:m.name,reason:"Sortie directe depuis le catalogue"}),E(r=>[...r,c.id]),Q?P(!0):(O("left"),setTimeout(()=>{var r;M(g+1),y(((r=f[g+1])==null?void 0:r.quantity)||1)},300))}catch(t){console.error("Erreur lors de la validation:",t),o({type:"error",title:"Erreur",message:"Impossible de valider la sortie",duration:5e3})}finally{j(!1)}}},H=()=>{P(!1),p()},A=async()=>{try{await w(),q("/badge-login")}catch(t){console.error("Erreur lors de la dÃ©connexion:",t),q("/badge-login")}},W=async()=>{if(!m||!c||S<=0){o({type:"error",title:"Erreur",message:"Veuillez renseigner une quantitÃ© valide",duration:5e3});return}j(!0);try{await V({productId:c.id,productReference:c.reference,productDesignation:c.designation,productPhoto:c.photo,quantity:S,reason:`Ã‰cart de stock signalÃ© - QuantitÃ© constatÃ©e: ${S}, Stock systÃ¨me: ${u}`,notes:"Ã‰cart signalÃ© lors d'une sortie"}),o({type:"info",title:"Ã‰cart signalÃ©",message:"Une demande de vÃ©rification a Ã©tÃ© envoyÃ©e au gestionnaire",duration:5e3}),N(!1),T(0)}catch(t){console.error("Erreur lors du signalement:",t),o({type:"error",title:"Erreur",message:"Impossible de signaler l'Ã©cart",duration:5e3})}finally{j(!1)}};return i.useEffect(()=>{const t=r=>{if(!(h||d)){if(C){r.key==="Enter"&&(r.preventDefault(),A());return}switch(r.key){case"ArrowRight":r.preventDefault(),a<u&&y(n=>Math.min(u,n+1));break;case"ArrowLeft":r.preventDefault(),a>1&&y(n=>Math.max(1,n-1));break;case"Enter":r.preventDefault(),!d&&a>0&&a<=u&&R();break}}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[a,u,d,C,h]),C?e.jsx("div",{className:"exit-flow-overlay",children:e.jsxs("div",{className:"exit-flow-container completion-screen",children:[e.jsx("div",{className:"completion-icon",children:e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.2",fill:"#10b981"}),e.jsx("path",{d:"M7 13l3 3 7-7",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h1",{className:"completion-title",children:"Sortie terminÃ©e !"}),e.jsxs("p",{className:"completion-message",children:[v," article",v>1?"s":""," sorti",v>1?"s":""," avec succÃ¨s par ",m==null?void 0:m.name]}),e.jsxs("div",{className:"completion-actions",children:[e.jsxs("button",{onClick:H,className:"btn-completion btn-new-exit",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 8v8m-4-4h8"})]}),"Nouvelle sortie"]}),e.jsxs("button",{onClick:A,className:"btn-completion btn-logout",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("polyline",{points:"16 17 21 12 16 7"}),e.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"Se dÃ©connecter"]})]})]})}):l?e.jsxs("div",{className:"exit-flow-overlay",children:[e.jsxs("div",{className:`exit-flow-container ${k==="left"?"slide-left":"slide-right"}`,children:[e.jsxs("div",{className:"exit-flow-header",children:[e.jsxs("div",{className:"progress-info",children:[e.jsxs("span",{className:"progress-text",children:["Article ",g+1," sur ",v]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${(g+1)/v*100}%`}})})]}),e.jsx("button",{onClick:()=>B(I),className:"btn-close",title:"Annuler",children:"âœ•"})]}),e.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--text-color)",marginBottom:"1.5rem",textAlign:"center"},children:"Sortie d'article"}),e.jsxs("div",{className:"product-card-large",children:[e.jsx("div",{className:"product-image-large",children:l.photo?e.jsx("img",{src:l.photo,alt:l.productDesignation}):e.jsx("div",{className:"product-image-placeholder-large",children:e.jsx("svg",{width:"120",height:"120",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"})})})}),e.jsxs("div",{className:"product-info-large",children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ff5722",marginBottom:"0.5rem"},children:l.productReference}),e.jsx("h2",{className:"product-designation-large",children:l.productDesignation}),e.jsxs("div",{className:"product-location-large",children:[e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#9ca3af",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("span",{children:z()})]}),e.jsxs("div",{className:"stock-info-large",children:[e.jsx("span",{className:"stock-label",style:{color:"#9ca3af"},children:"Stock disponible:"}),e.jsxs("span",{className:"stock-value-large",style:{color:"#9ca3af"},children:[u," ",l.unit||""]})]}),e.jsx("button",{onClick:()=>N(!0),style:{background:"transparent",border:"none",color:"#f59e0b",fontSize:"0.9rem",cursor:"pointer",textDecoration:"underline",marginTop:"0.5rem",padding:"0.25rem"},children:"un Ã©cart ?"}),e.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[e.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",display:"block",marginBottom:"0.5rem"},children:"QuantitÃ© Ã  sortir"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("button",{onClick:()=>y(Math.max(1,a-1)),disabled:a<=1||d,style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-color)",cursor:"pointer",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"âˆ’"}),e.jsx("input",{type:"number",value:a,onChange:t=>{const r=parseInt(t.target.value)||1;y(Math.max(1,Math.min(r,u)))},min:"1",max:u,disabled:d,style:{flex:1,height:"32px",textAlign:"center",fontSize:"1rem",fontWeight:"600",border:"1px solid var(--border-color)",borderRadius:"6px",background:"var(--input-bg)",color:"var(--text-color)"}}),e.jsx("button",{onClick:()=>y(Math.min(u,a+1)),disabled:a>=u||d,style:{width:"32px",height:"32px",borderRadius:"6px",border:"1px solid var(--border-color)",background:"var(--input-bg)",color:"var(--text-color)",cursor:"pointer",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})]})]}),e.jsx("button",{className:"btn-validate-large",onClick:R,disabled:d||a<=0||a>u,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Traitement en cours..."]}):Q?e.jsx(e.Fragment,{children:"âœ“ Valider et terminer"}):e.jsx(e.Fragment,{children:"âœ“ Valider cet article"})})]}),h&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"1rem"},children:e.jsxs("div",{style:{background:"var(--card-bg)",borderRadius:"12px",padding:"1.5rem",maxWidth:"400px",width:"100%",border:"1px solid var(--border-color)"},children:[e.jsx("h3",{style:{marginBottom:"1rem",color:"var(--text-color)"},children:"Signaler un Ã©cart de stock"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"var(--text-color)",fontSize:"0.9rem",fontWeight:"600"},children:"QuantitÃ© rÃ©ellement disponible *"}),e.jsx("input",{type:"number",value:S||"",onChange:t=>T(parseInt(t.target.value)||0),placeholder:"Ex: 10",min:"0",style:{width:"100%",padding:"0.75rem",background:"var(--input-bg)",border:"2px solid var(--border-color)",borderRadius:"8px",color:"var(--text-color)",fontSize:"1rem",outline:"none"}}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"0.25rem"},children:["Stock systÃ¨me: ",u]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[e.jsx("button",{onClick:()=>{N(!1),T(0)},style:{flex:1,padding:"0.75rem",background:"var(--bg-secondary)",color:"var(--text-color)",border:"1px solid var(--border-color)",borderRadius:"8px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600"},children:"Annuler"}),e.jsx("button",{onClick:W,disabled:d,style:{flex:1,padding:"0.75rem",background:"#f59e0b",color:"white",border:"none",borderRadius:"8px",cursor:d?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:"600",opacity:d?.6:1},children:d?"Envoi...":"Signaler"})]})]})})]}):null},X=()=>{const{products:f,currentUser:p,stockMovements:B,loading:q,getPendingOrders:m}=_(),{addNotification:L}=Z(),[b,F]=i.useState("all"),[w,V]=i.useState(""),[o,g]=i.useState(()=>{if(!p)return[];try{const t=localStorage.getItem(`cart_${p.id}`);if(t)return console.log("Panier restaurÃ© depuis localStorage:",t),JSON.parse(t)}catch(t){console.error("Erreur lors de la restauration du panier:",t)}return[]}),[M,a]=i.useState({}),[y,d]=i.useState(!1),[j,C]=i.useState({}),[P,k]=i.useState(!1);i.useEffect(()=>{if(p)try{o.length>0?(console.log("Sauvegarde du panier dans localStorage:",o),localStorage.setItem(`cart_${p.id}`,JSON.stringify(o))):(console.log("Suppression du panier du localStorage (vide)"),localStorage.removeItem(`cart_${p.id}`))}catch(t){console.error("Erreur lors de la sauvegarde du panier:",t)}},[o,p]);const O=t=>m().filter(n=>n.product_id===t).reduce((n,s)=>n+s.quantity,0),h=f,N=i.useMemo(()=>{if(!p)return[];const t=B.filter(s=>s.movementType==="exit"&&s.userId===p.id),r={};t.forEach(s=>{r[s.productId]=(r[s.productId]||0)+s.quantity});const n=Object.entries(r).sort(([,s],[,D])=>D-s).slice(0,10).map(([s])=>s);return h.filter(s=>n.includes(s.id))},[h,B,p]),S=i.useMemo(()=>{let t=h;if(b==="top-ordered"?t=N:b!=="all"&&(t=h.filter(r=>r.category===b)),w.trim()){const r=w.toLowerCase();t=t.filter(n=>n.reference.toLowerCase().includes(r)||n.designation.toLowerCase().includes(r))}return t},[h,b,N,w]),T=i.useMemo(()=>["all","top-ordered",...new Set(h.map(r=>r.category))],[h]),I=t=>M[t]||1,E=(t,r)=>{const n=f.find(x=>x.id===t);if(!n)return;const s=n.currentStock,D=Math.max(1,Math.min(r,s));a({...M,[t]:D})},l=t=>{E(t,I(t)+1)},v=t=>{E(t,I(t)-1)},Q=t=>{const r=o.find(n=>n.productId===t);return r?r.quantity:0},c=async t=>{const r=f.find(x=>x.id===t);if(!r)return;const n=I(t),s=Q(t);if(s+n>r.currentStock){alert(`Stock insuffisant ! Disponible: ${r.currentStock}, DÃ©jÃ  dans le panier: ${s}`);return}C(x=>({...x,[t]:!0})),await new Promise(x=>setTimeout(x,300));const D=o.find(x=>x.productId===t);g(D?o.map(x=>x.productId===t?{...x,quantity:x.quantity+n}:x):[...o,{productId:r.id,productReference:r.reference,productDesignation:r.designation,quantity:n,maxStock:r.currentStock,photo:r.photo,storageZone:r.storageZone,shelf:r.shelf,position:r.position,unit:r.unit}]),a({...M,[t]:1}),C(x=>({...x,[t]:!1}))},u=t=>{g(o.filter(r=>r.productId!==t))},z=()=>{g([])},R=()=>{!p||o.length===0||d(!0)},H=()=>{d(!1),z(),L({type:"success",title:"Sortie terminÃ©e !",message:"Tous les articles ont Ã©tÃ© sortis avec succÃ¨s",duration:5e3})},A=t=>{d(!1),t.length>0&&(g(r=>r.filter(n=>!t.includes(n.productId))),L({type:"info",title:"Sortie annulÃ©e",message:`${t.length} article(s) ont Ã©tÃ© sortis avant l'annulation`,duration:5e3}))},W=()=>o.reduce((t,r)=>t+r.quantity,0),$=t=>{const r=t.currentStock/t.maxStock;return t.currentStock===0||r<=.2?"critical":r<=.4?"low":"normal"};return q?e.jsxs("div",{className:"catalog-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",gap:"1.5rem"},children:[e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"var(--accent-color)",strokeWidth:"2",style:{animation:"spin 1s linear infinite"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),e.jsx("p",{style:{fontSize:"1.25rem",color:"var(--text-secondary)",fontWeight:"500"},children:"Chargement du catalogue..."})]}):e.jsxs("div",{className:"catalog-container",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[e.jsx("h1",{style:{margin:0},children:"Catalogue des Produits"}),e.jsxs("button",{onClick:()=>k(!0),style:{position:"relative",padding:"0.75rem 1.25rem",fontSize:"1rem",fontWeight:"500",background:o.length>0?"var(--accent-color)":"var(--border-color)",color:"#ffffff",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s",boxShadow:o.length>0?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow=o.length>0?"0 4px 12px rgba(59, 130, 246, 0.4)":"0 2px 8px rgba(255, 255, 255, 0.1)"},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow=o.length>0?"0 2px 8px rgba(59, 130, 246, 0.3)":"none"},children:["ðŸ›’ Panier",o.length>0&&e.jsx("span",{style:{background:"#ef4444",color:"#ffffff",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold",marginLeft:"0.25rem"},children:W()})]})]}),e.jsxs("div",{style:{marginBottom:"1.5rem",display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsx("input",{type:"text",placeholder:"Rechercher par rÃ©fÃ©rence ou dÃ©signation...",value:w,onChange:t=>V(t.target.value),style:{flex:1,padding:"0.875rem 1rem",fontSize:"1rem",border:"2px solid var(--border-color)",borderRadius:"8px",background:"var(--input-bg)",color:"var(--text-color)",outline:"none",transition:"border-color 0.2s"},onFocus:t=>t.currentTarget.style.borderColor="var(--accent-color)",onBlur:t=>t.currentTarget.style.borderColor="var(--border-color)"}),e.jsx("select",{value:b,onChange:t=>F(t.target.value),style:{padding:"0.875rem 1rem",fontSize:"1rem",border:"2px solid var(--border-color)",borderRadius:"8px",background:"var(--bg-color)",color:"#ffffff",outline:"none",cursor:"pointer",minWidth:"200px",transition:"border-color 0.2s"},onFocus:t=>t.currentTarget.style.borderColor="var(--accent-color)",onBlur:t=>t.currentTarget.style.borderColor="var(--border-color)",children:T.map(t=>e.jsx("option",{value:t,style:{background:"var(--bg-color)",color:"#ffffff"},children:t==="all"?"Toutes les catÃ©gories":t==="top-ordered"?"Les plus utilisÃ©es":t},t))})]}),S.length===0?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"40vh",gap:"1rem"},children:[e.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"var(--accent-color)",strokeWidth:"2",style:{animation:"spin 1s linear infinite"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}),e.jsx("p",{style:{fontSize:"1rem",color:"var(--text-secondary)",fontWeight:"500"},children:"Aucun produit dans cette catÃ©gorie"})]}):e.jsx("div",{className:"products-grid",children:S.map(t=>{const r=$(t),n=I(t.id);return e.jsxs("div",{className:"product-card",children:[e.jsxs("div",{className:"product-image-wrapper",children:[e.jsx("span",{className:"product-category-badge",children:t.category}),t.photo?e.jsx("img",{src:t.photo,alt:t.designation,className:"product-image"}):e.jsx("div",{className:"product-image-placeholder",children:"ðŸ“¦"})]}),e.jsxs("div",{className:"product-details",children:[e.jsx("div",{className:"product-ref",children:t.reference}),e.jsx("h3",{className:"product-name",children:t.designation}),e.jsxs("div",{className:"product-stock-inline",children:["QuantitÃ© : ",e.jsx("span",{className:r,children:t.currentStock})]}),(()=>{const s=O(t.id);return e.jsx("span",{style:{display:"inline-block",padding:"0.125rem 0.5rem",fontSize:"0.7rem",fontWeight:"600",color:s>0?"#fff":"transparent",background:s>0?"#10b981":"transparent",borderRadius:"4px",marginTop:"0.25rem",width:"fit-content",visibility:s>0?"visible":"hidden"},children:s>0?`En commande x${s}`:"Spacer"})})(),e.jsxs("div",{className:"product-actions",children:[e.jsxs("div",{className:"quantity-selector",children:[e.jsx("button",{className:"quantity-btn",onClick:()=>v(t.id),disabled:n<=1,children:"âˆ’"}),e.jsx("input",{type:"number",className:"quantity-input",value:n,onChange:s=>E(t.id,parseInt(s.target.value)||1),min:"1",max:t.currentStock}),e.jsx("button",{className:"quantity-btn",onClick:()=>l(t.id),disabled:n>=t.currentStock,children:"+"})]}),t.currentStock>0?e.jsx("button",{className:"add-to-cart-btn-icon",onClick:()=>c(t.id),title:"Ajouter au panier",disabled:j[t.id],children:j[t.id]?e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 0.8s linear infinite"},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.25"}),e.jsx("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]}):e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})}):e.jsx("button",{className:"add-to-cart-btn-icon",disabled:!0,title:"Stock Ã©puisÃ©",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"9",cy:"21",r:"1"}),e.jsx("circle",{cx:"20",cy:"21",r:"1"}),e.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})})]})]})]},t.id)})}),o.length>0&&e.jsxs("div",{className:"fixed-cart",children:[e.jsxs("div",{className:"cart-header",children:[e.jsx("h2",{children:"Mon Panier"}),e.jsxs("span",{className:"cart-count",children:[W()," articles"]})]}),e.jsx("div",{className:"cart-items",children:o.map(t=>e.jsxs("div",{className:"cart-item",children:[t.photo?e.jsx("img",{src:t.photo,alt:t.productDesignation,className:"cart-item-image"}):e.jsx("div",{className:"cart-item-image",children:"ðŸ“¦"}),e.jsxs("div",{className:"cart-item-details",children:[e.jsx("div",{className:"cart-item-ref product-reference-highlight",children:t.productReference}),e.jsx("div",{className:"cart-item-name",children:t.productDesignation}),e.jsxs("div",{className:"cart-item-quantity",children:[e.jsx("span",{children:"QuantitÃ©:"}),e.jsx("strong",{children:t.quantity})]})]}),e.jsx("button",{className:"remove-item-btn",onClick:()=>u(t.productId),title:"Retirer du panier",children:"Ã—"})]},t.productId))}),e.jsxs("div",{className:"cart-footer",children:[e.jsx("button",{className:"empty-cart-btn",onClick:z,children:"Vider le panier"}),e.jsx("button",{className:"submit-cart-btn",onClick:R,children:"Effectuer la sortie"})]})]}),P&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},onClick:()=>k(!1),children:e.jsxs("div",{style:{background:"var(--bg-color)",borderRadius:"12px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{style:{padding:"1.5rem",borderBottom:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("h2",{style:{margin:0,fontSize:"1.5rem"},children:["ðŸ›’ Mon Panier (",W()," articles)"]}),e.jsx("button",{onClick:()=>k(!1),style:{background:"transparent",border:"none",fontSize:"2rem",cursor:"pointer",color:"var(--text-secondary)",lineHeight:1,padding:"0.25rem"},children:"Ã—"})]}),e.jsx("div",{style:{flex:1,overflow:"auto",padding:"1.5rem"},children:o.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"3rem 1rem",color:"var(--text-secondary)"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"ðŸ›’"}),e.jsx("p",{style:{fontSize:"1.25rem",margin:0},children:"Votre panier est vide"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:o.map(t=>e.jsxs("div",{style:{background:"var(--card-bg)",padding:"1rem",borderRadius:"8px",border:"1px solid var(--border-color)",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:t.productReference}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"0.5rem"},children:t.productDesignation}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--accent-color)"},children:["QuantitÃ©: ",e.jsx("strong",{children:t.quantity})," ",t.unit]})]}),e.jsx("button",{onClick:()=>u(t.productId),style:{background:"#ef4444",color:"#ffffff",border:"none",borderRadius:"6px",width:"36px",height:"36px",fontSize:"1.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s"},onMouseEnter:r=>r.currentTarget.style.background="#dc2626",onMouseLeave:r=>r.currentTarget.style.background="#ef4444",title:"Retirer du panier",children:"Ã—"})]},t.productId))})}),o.length>0&&e.jsxs("div",{style:{padding:"1.5rem",borderTop:"1px solid var(--border-color)",display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>{z(),k(!1)},style:{flex:1,padding:"0.875rem",background:"transparent",color:"var(--text-secondary)",border:"2px solid var(--border-color)",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:t=>{t.currentTarget.style.borderColor="#ef4444",t.currentTarget.style.color="#ef4444"},onMouseLeave:t=>{t.currentTarget.style.borderColor="var(--border-color)",t.currentTarget.style.color="var(--text-secondary)"},children:"Vider le panier"}),e.jsx("button",{onClick:()=>{k(!1),R()},style:{flex:2,padding:"0.875rem",background:"var(--accent-color)",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:t=>t.currentTarget.style.background="#2563eb",onMouseLeave:t=>t.currentTarget.style.background="var(--accent-color)",children:"Effectuer la sortie"})]})]})}),y&&e.jsx(U,{cartItems:o,onComplete:H,onCancel:A})]})};export{X as default};
